<div class="contract-inputs space-y-4">
  <h3 class="text-lg font-semibold mb-4">Contract Details</h3>

  <div class="input-group">
    <label for="years" class="text-sm font-medium mb-1 block">Years:</label>
    <p-select
      class="w-full"
      [options]="yearsOptions()"
      optionLabel="label"
      optionValue="value"
      [ngModel]="currentYears"
      (onChange)="updateYears($event.value)"
    >
    </p-select>
  </div>

  <div class="flex gap-2 flex-col w-full">
    <label for="baseSalary" class="text-sm font-medium mb-1 block"
      >Base Salary:</label
    >
    <div class="flex gap-2">
      <button
        pButton
        icon="pi pi-minus"
        (mousedown)="onMouseDown('decrement', 'salary', 100000)"
        (mouseup)="onMouseUp()"
        (mouseleave)="onMouseLeave()"
        title="Hold for rapid decrease"
        class="p-button-outlined"
      ></button>
      <input
        pInputText
        type="text"
        id="baseSalary"
        [value]="formattedSalary()"
        readonly
        class="salary-input flex-1 text-center font-semibold"
      />
      <button
        pButton
        icon="pi pi-plus"
        (mousedown)="onMouseDown('increment', 'salary', 100000)"
        (mouseup)="onMouseUp()"
        (mouseleave)="onMouseLeave()"
        title="Hold for rapid increase"
        class="p-button-outlined"
      ></button>
    </div>
  </div>

  <div class="flex gap-2 flex-col w-full">
    <label for="signingBonus" class="text-sm font-medium mb-1 block"
      >Signing Bonus:</label
    >
    <div class="flex gap-2">
      <button
        pButton
        icon="pi pi-minus"
        (mousedown)="onMouseDown('decrement', 'bonus', 100000)"
        (mouseup)="onMouseUp()"
        (mouseleave)="onMouseLeave()"
        title="Hold for rapid decrease"
        class="p-button-outlined"
      ></button>
      <input
        pInputText
        type="text"
        id="signingBonus"
        [value]="formattedBonus()"
        readonly
        class="bonus-input flex-1 text-center font-semibold"
      />
      <button
        pButton
        icon="pi pi-plus"
        (mousedown)="onMouseDown('increment', 'bonus', 100000)"
        (mouseup)="onMouseUp()"
        (mouseleave)="onMouseLeave()"
        title="Hold for rapid increase"
        class="p-button-outlined"
      ></button>
    </div>
  </div>

  <!-- Guarantees Section -->
  <div class="guarantees-section">
    <div class="flex justify-between items-center mb-3">
      <label class="text-base font-medium">Guarantees:</label>
      <button
        pButton
        icon="pi pi-plus"
        label="Add Guarantee"
        size="small"
        (click)="addGuarantee()"
        class="p-button-outlined p-button-sm"
      ></button>
    </div>

    <!-- Total Guaranteed Amount -->
    <div
      class="total-guarantees mb-4 p-2 bg-blue-50 dark:bg-blue-900/20 rounded border-l-4 border-blue-400"
    >
      <span class="text-sm font-medium text-blue-700 dark:text-blue-300"
        >Total Guaranteed: {{ formattedTotalGuarantees() }}</span
      >
    </div>

    <!-- Guarantees List -->
    <div class="guarantees-list space-y-4" *ngIf="currentGuarantees.length > 0">
      <div
        *ngFor="let guarantee of currentGuarantees; let i = index"
        class="guarantee-item p-4 border rounded-lg bg-gray-50 dark:bg-gray-800"
      >
        <!-- Header with Year and Type -->
        <div class="flex gap-3 items-end mb-4">
          <div class="flex-1">
            <label class="text-sm font-medium mb-1 block">Year:</label>
            <p-select
              [options]="guaranteeYearOptions()"
              optionLabel="label"
              optionValue="value"
              [ngModel]="guarantee.year"
              (onChange)="updateGuaranteeYear(i, $event.value)"
              class="w-full"
            ></p-select>
          </div>

          <div class="flex-1">
            <label class="text-sm font-medium mb-1 block">Type:</label>
            <p-select
              [options]="guaranteeTypeOptions"
              optionLabel="label"
              optionValue="value"
              [ngModel]="guarantee.type"
              (onChange)="updateGuaranteeType(i, $event.value)"
              class="w-full"
            ></p-select>
          </div>

          <button
            pButton
            icon="pi pi-trash"
            severity="danger"
            size="small"
            (click)="removeGuarantee(i)"
            title="Remove guarantee"
            class="p-button-outlined p-button-sm"
          ></button>
        </div>

        <!-- Amount Section -->
        <div class="flex gap-3 items-center">
          <label class="text-sm font-medium min-w-0 flex-shrink-0"
            >Amount:</label
          >
          <div class="flex gap-2 flex-1">
            <button
              pButton
              icon="pi pi-minus"
              size="small"
              (mousedown)="onMouseDown('decrement', 'guarantee', 100000, i)"
              (mouseup)="onMouseUp()"
              (mouseleave)="onMouseLeave()"
              title="Hold for rapid decrease"
              class="p-button-outlined p-button-sm"
            ></button>
            <input
              pInputText
              type="text"
              [value]="formatGuaranteeAmount(guarantee.amount)"
              readonly
              class="guarantee-amount-input flex-1 text-center font-semibold"
            />
            <button
              pButton
              icon="pi pi-plus"
              size="small"
              (mousedown)="onMouseDown('increment', 'guarantee', 100000, i)"
              (mouseup)="onMouseUp()"
              (mouseleave)="onMouseLeave()"
              title="Hold for rapid increase"
              class="p-button-outlined p-button-sm"
            ></button>
          </div>
        </div>
      </div>
    </div>

    <!-- No Guarantees Message -->
    <div
      *ngIf="currentGuarantees.length === 0"
      class="text-center text-gray-500 dark:text-gray-400 py-6 px-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg"
    >
      <i class="pi pi-info-circle text-2xl mb-2 block"></i>
      <p class="text-sm font-medium mb-1">No guarantees added yet</p>
      <p class="text-xs">Click "Add Guarantee" to add contract guarantees</p>
    </div>
  </div>
</div>
