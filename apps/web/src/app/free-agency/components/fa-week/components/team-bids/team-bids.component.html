<div class="bg-gray-900 rounded-lg p-6 mb-8">
  <!-- Header Section -->
  <div class="flex justify-between items-center mb-6">
    <h3 class="text-xl font-semibold text-white">Your Bids</h3>
    <span
      class="bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-medium"
    >
      {{ teamBids().length }} active
    </span>
  </div>

  <!-- Bids List -->
  <div class="space-y-4">
    <!-- Loading State -->
    @if (!sportsDataReady()) {
    <div class="bg-gray-800 rounded-lg p-8 text-center">
      <div class="text-gray-400 mb-2">
        <i class="pi pi-spin pi-spinner text-4xl mb-4 block"></i>
        <p class="text-lg font-medium">Loading player data...</p>
        <p class="text-sm opacity-70">
          Please wait while we load the latest player information
        </p>
      </div>
    </div>
    }

    <!-- Bids when data is ready -->
    <div
      *ngFor="let bid of teamBids()"
      class="bg-gray-800 rounded-lg p-4 border-l-4 transition-all duration-200 hover:shadow-lg hover:shadow-gray-700/50"
      [ngClass]="{
        'border-blue-500': bid.status === 'pending',
        'border-green-500': bid.status === 'accepted',
        'border-orange-500': bid.status === 'shortlisted',
        'border-red-500': bid.status === 'rejected'
      }"
    >
      <!-- Bid Content Grid -->
      <div class="flex flex-col space-y-4">
        <!-- Player Info with Photo and Status Badge -->
        <div class="flex items-start justify-between relative">
          <!-- Team Logo Background -->
          @if(getTeamLogoUrl(bid.playerId)) {
          <div class="absolute inset-0 w-full h-full opacity-40">
            <img
              [src]="getTeamLogoUrl(bid.playerId)"
              [alt]="getTeamName(bid.playerId)"
              class="w-24 h-24 object-cover"
            />
          </div>
          }
          <!-- Player Photo with Team Logo Background -->
          <div class="flex items-center space-x-4">
            <div class="relative">
              <!-- Fallback team indicator when no logo -->
              @if (!getTeamLogoUrl(bid.playerId)) {
              <div
                class="absolute inset-0 w-full h-full bg-gradient-to-br from-blue-600 to-purple-600 opacity-60 flex items-center justify-center"
              >
                <span class="text-white text-xs font-bold">
                  {{ getTeamInitials(bid.playerId) }}
                </span>
              </div>
              }
              <!-- Player Photo -->
              @if(getPlayerPhotoUrl(bid.playerId)) {
              <div class="relative z-10 w-full h-full">
                <img
                  [src]="getPlayerPhotoUrl(bid.playerId)"
                  [alt]="
                    getPlayerFirstName(bid.playerId) +
                    ' ' +
                    getPlayerLastName(bid.playerId)
                  "
                  class="w-full h-full object-cover"
                  (error)="onImageError($event)"
                />
                @if(!getPlayerPhotoUrl(bid.playerId)) {
                <div
                  class="w-full h-full bg-gray-600 flex items-center justify-center text-gray-400 text-lg font-medium rounded-full"
                >
                  {{ getPlayerInitials(bid.playerId) }}
                </div>
                }
              </div>
              }
            </div>

            <!-- Player Details -->
            <div class="flex-1 min-w-0">
              <div class="text-white font-semibold text-xl mb-2">
                {{ getPlayerFirstName(bid.playerId) }}
                {{ getPlayerLastName(bid.playerId) }}
              </div>
              <div class="text-gray-400 text-base mb-1">
                {{ getTeamName(bid.playerId) }}
              </div>
              <div class="text-gray-400 text-sm">
                {{ getPlayerNumber(bid.playerId) }} â€¢
                {{ getPlayerPosition(bid.playerId) }}
              </div>
            </div>
          </div>

          <!-- Status Badge - Top Right -->
          <div class="flex-shrink-0">
            <p-badge
              [value]="bid.status | titlecase"
              [severity]="getStatusSeverity(bid.status)"
              class="text-sm"
            >
            </p-badge>
          </div>
        </div>

        <!-- Bid Offer Details - Bottom -->
        <div class="bg-gray-700 rounded-lg p-4">
          <div class="flex items-center justify-between mb-3">
            <div class="text-white font-bold text-2xl">
              {{ formatCurrency(bid.offer.totalValue) }}
            </div>
            <div class="text-gray-400 text-sm">
              {{ bid.offer.years }} year(s)
            </div>
          </div>
          <div class="text-green-400 font-medium text-lg mb-3">
            {{ formatCurrency(bid.offer.apy) }}/yr
          </div>

          <!-- Feedback - Under the Offer -->
          <div
            *ngIf="bid.feedback"
            class="text-gray-300 text-sm italic border-t border-gray-600 pt-3"
          >
            {{ bid.feedback }}
          </div>

          <!-- Success Message for Accepted Bids -->
          <div
            *ngIf="bid.status === 'accepted'"
            class="text-green-400 text-sm font-medium mt-3 text-center"
          >
            ðŸŽ‰ Player signed successfully!
          </div>
        </div>

        <!-- Actions -->
        <div class="flex justify-center space-x-3">
          <p-button
            *ngIf="bid.status === 'pending'"
            label="Cancel Bid"
            severity="danger"
            size="small"
            (onClick)="cancelBid(bid.id)"
            class="w-full sm:w-auto"
          >
          </p-button>

          <!-- View Roster Button for Accepted Bids -->
          <p-button
            *ngIf="bid.status === 'accepted'"
            label="View Roster"
            severity="success"
            size="small"
            (onClick)="viewRoster()"
            class="w-full sm:w-auto"
          >
          </p-button>
        </div>
      </div>
    </div>

    <!-- No Bids State -->
    <div
      *ngIf="sportsDataReady() && teamBids().length === 0"
      class="bg-gray-800 rounded-lg p-8 text-center"
    >
      <div class="text-gray-400 mb-2">
        <i class="pi pi-inbox text-4xl mb-4 block"></i>
        <p class="text-lg font-medium">No active bids</p>
        <p class="text-sm opacity-70">
          Submit bids on available players to get started
        </p>
      </div>
    </div>
  </div>
</div>
