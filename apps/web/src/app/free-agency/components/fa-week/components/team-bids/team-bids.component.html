<div class="bg-gray-900 rounded-lg p-6 mb-8 max-h-[1000px] overflow-y-auto">
  <!-- Header Section -->
  <div class="flex justify-between items-center mb-6">
    <h3 class="text-xl font-semibold text-white">Your Bids</h3>
    <span
      class="bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-medium"
    >
      {{ teamBids().length }} active
    </span>
  </div>

  <!-- Bids List -->
  <div class="space-y-4">
    <!-- Loading State -->
    @if (!sportsDataReady()) {
    <div class="bg-gray-800 rounded-lg p-8 text-center">
      <div class="text-gray-400 mb-2">
        <i class="pi pi-spin pi-spinner text-4xl mb-4 block"></i>
        <p class="text-lg font-medium">Loading player data...</p>
        <p class="text-sm opacity-70">
          Please wait while we load the latest player information
        </p>
      </div>
    </div>
    }

    <!-- Bids when data is ready -->
    <div
      *ngFor="let bid of teamBids()"
      class="bg-gray-800 rounded-lg p-4 border-l-4 transition-all duration-200 hover:shadow-lg hover:shadow-gray-700/50"
      [ngClass]="{
        'border-blue-500': bid.status === 'pending',
        'border-green-500': bid.status === 'accepted',
        'border-orange-500': bid.status === 'shortlisted',
        'border-red-500': bid.status === 'rejected'
      }"
    >
      <!-- Bid Content Grid -->
      <div class="flex flex-col space-y-4">
        <!-- Player Info with Shared Player Card -->
        <div class="flex items-start justify-between relative">
          <!-- Use Shared Player Card Component -->
          <app-player-card
            [playerData]="getPlayerCardData(bid)"
            [config]="getPlayerCardConfig()"
          ></app-player-card>
        </div>

        <!-- Bid Details -->
        <div class="flex flex-col space-y-2">
          <div class="flex justify-between items-center">
            <span class="text-gray-400 text-sm">Contract Value:</span>
            <span class="text-white font-semibold">
              {{
                formatCurrency(
                  bid.offer.totalValue || bid.offer.apy * bid.offer.years
                )
              }}
            </span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-gray-400 text-sm">Years:</span>
            <span class="text-white">{{ bid.offer.years }}</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-gray-400 text-sm">APY:</span>
            <span class="text-white">{{ formatCurrency(bid.offer.apy) }}</span>
          </div>
        </div>

        <!-- Bid Status and Actions -->
        <div class="flex justify-between items-center">
          <div class="flex items-center space-x-2">
            <p-badge
              [value]="getStatusDisplayText(bid.status)"
              [severity]="getStatusSeverity(bid.status)"
            ></p-badge>
            <span class="text-gray-400 text-xs">
              {{ bid.submittedAt | date : 'short' }}
            </span>
          </div>

          @if (bid.status === 'pending') {
          <button
            pButton
            label="Cancel"
            icon="pi pi-times"
            (click)="cancelBid(bid.id)"
            class="p-button-danger p-button-sm"
          ></button>
          }
        </div>

        <!-- Feedback Section (for accepted, shortlisted, or rejected bids) -->
        @if (bid.feedback && bid.status !== 'pending') {
        <div class="mt-3 p-3 bg-gray-700 rounded-lg">
          <div class="flex items-start space-x-2">
            <i
              class="pi text-sm mt-0.5"
              [ngClass]="{
                'pi-check-circle text-green-400': bid.status === 'accepted',
                'pi-clock text-orange-400':
                  bid.status === 'shortlisted' || bid.status === 'considering',
                'pi-times-circle text-red-400': bid.status === 'rejected'
              }"
            ></i>
            <div class="flex-1">
              <p class="text-sm text-gray-300 font-medium mb-1">
                {{
                  bid.status === 'accepted'
                    ? 'Player Response:'
                    : bid.status === 'shortlisted' ||
                      bid.status === 'considering'
                    ? 'Player Feedback:'
                    : 'Rejection Reason:'
                }}
              </p>
              <p class="text-sm text-gray-400">{{ bid.feedback }}</p>
            </div>
          </div>
        </div>
        }
      </div>
    </div>

    <!-- No Bids State -->
    <div
      *ngIf="sportsDataReady() && teamBids().length === 0"
      class="bg-gray-800 rounded-lg p-8 text-center"
    >
      <div class="text-gray-400 mb-2">
        <i class="pi pi-inbox text-4xl mb-4 block"></i>
        <p class="text-lg font-medium">No active bids</p>
        <p class="text-sm opacity-70">
          Submit bids on available players to get started
        </p>
      </div>
    </div>
  </div>
</div>
