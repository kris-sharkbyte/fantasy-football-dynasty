<div class="fa-week-container">
  <!-- Toast Messages -->
  <p-toast></p-toast>

  <!-- FA Week Header -->
  <app-fa-week-header></app-fa-week-header>

  <!-- Salary Cap Section -->
  <app-salary-cap></app-salary-cap>

  <!-- Main Content Grid -->
  <div class="content-grid">
    <!-- Available Players Section -->
    <div class="players-section">
      <app-players-table [config]="playersTableConfig()"></app-players-table>
    </div>

    <!-- Team Bids Section -->
    <div class="bids-section">
      <app-team-bids></app-team-bids>
    </div>
  </div>

  <!-- Player Decisions Section -->
  <app-player-decisions></app-player-decisions>

  <!-- Bid Modal -->
  <p-dialog
    [visible]="showBidModal()"
    [modal]="true"
    [closable]="true"
    [draggable]="false"
    [resizable]="false"
    [style]="{ width: '50rem' }"
    header="Submit Bid"
    (onHide)="closeBidModal()"
  >
    @if (selectedPlayer()) {
    <div class="bid-modal-content">
      <!-- Player Info with Shared Player Card -->
      <div class="player-info-section">
        <app-player-card
          [playerData]="getPlayerCardData()"
          [config]="getPlayerCardConfig()"
        ></app-player-card>

        @if (playerMinimum()) {
        <div class="player-minimum-info">
          <p-tag
            [value]="'Est. Min: ' + formatCurrency(playerMinimum() || 0)"
            severity="info"
            [rounded]="true"
          ></p-tag>
        </div>
        }
      </div>

      <!-- Contract Inputs -->
      <app-contract-inputs
        [years]="bidForm().years"
        [baseSalary]="bidForm().baseSalary"
        [signingBonus]="bidForm().signingBonus || 0"
        [mode]="'total'"
        (yearsChange)="onYearsChange($event)"
        (baseSalaryChange)="onBaseSalaryChange($event)"
        (signingBonusChange)="onSigningBonusChange($event)"
      ></app-contract-inputs>

      <!-- Bid Summary -->
      <div class="bid-summary">
        <h4>Bid Summary</h4>
        <div class="summary-item">
          <span class="label">Total Value:</span>
          <span class="value">{{ formatCurrency(totalBidValue()) }}</span>
        </div>
        <div class="summary-item">
          <span class="label">Average Annual Value:</span>
          <span class="value">{{ formatCurrency(averageAnnualValue()) }}</span>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="modal-actions">
        <button
          pButton
          label="Cancel"
          (click)="closeBidModal()"
          class="p-button-secondary"
        ></button>
        <button
          pButton
          label="Submit Bid"
          (click)="submitBid()"
          [disabled]="isSubmitting()"
          [loading]="isSubmitting()"
          class="p-button-primary"
        ></button>
      </div>
    </div>
    }
  </p-dialog>
</div>
