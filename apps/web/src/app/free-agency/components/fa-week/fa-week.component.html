<div class="fa-week-container">
  <!-- FA Week Header -->
  <app-fa-week-header></app-fa-week-header>

  <!-- Salary Cap Section -->
  <app-salary-cap></app-salary-cap>

  <!-- Main Content Grid -->
  <div class="content-grid">
    <!-- Available Players Section -->
    <div class="players-section">
      <app-available-players
        (bidButtonClick)="openBidModal($event)"
      ></app-available-players>
    </div>

    <!-- Team Bids Section -->
    <div class="bids-section">
      <app-team-bids></app-team-bids>
    </div>
  </div>

  <!-- Bid Modal -->
  <p-dialog
    [visible]="showBidModal()"
    [modal]="true"
    [closable]="true"
    [draggable]="false"
    [resizable]="false"
    [style]="{ width: '50rem' }"
    header="Submit Bid"
    (onHide)="closeBidModal()"
  >
    @if (selectedPlayer()) {
    <div class="bid-modal-content">
      <!-- Player Info -->
      <div class="player-info">
        <h3>{{ selectedPlayer()?.name }}</h3>
        <p>
          {{ selectedPlayer()?.position }} â€¢ {{ selectedPlayer()?.age }} years
          old
        </p>
        @if (playerMinimum()) {
        <p class="player-minimum">
          Estimated Minimum: {{ formatCurrency(playerMinimum() || 0) }}
        </p>
        }
      </div>

      <!-- Contract Inputs -->
      <app-contract-inputs
        [years]="bidForm().years"
        [baseSalary]="bidForm().baseSalary"
        [signingBonus]="bidForm().signingBonus || 0"
        [mode]="'total'"
        (yearsChange)="onYearsChange($event)"
        (baseSalaryChange)="onBaseSalaryChange($event)"
        (signingBonusChange)="onSigningBonusChange($event)"
      ></app-contract-inputs>

      <!-- Bid Summary -->
      <div class="bid-summary">
        <h4>Bid Summary</h4>
        <div class="summary-item">
          <span class="label">Total Value:</span>
          <span class="value">{{ formatCurrency(totalBidValue()) }}</span>
        </div>
        <div class="summary-item">
          <span class="label">Average Annual Value:</span>
          <span class="value">{{ formatCurrency(averageAnnualValue()) }}</span>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="modal-actions">
        <button
          pButton
          label="Cancel"
          (click)="closeBidModal()"
          class="p-button-secondary"
        ></button>
        <button
          pButton
          label="Submit Bid"
          (click)="submitBid()"
          [disabled]="isSubmitting()"
          [loading]="isSubmitting()"
          class="p-button-primary"
        ></button>
      </div>
    </div>
    }
  </p-dialog>
</div>
