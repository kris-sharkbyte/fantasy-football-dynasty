<div class="open-fa-container">
  <!-- Open FA Header -->
  <div class="open-fa-header">
    <div class="header-info">
      <h2 class="header-title">Open Free Agency</h2>
      <p class="header-description">
        Sign any unsigned player immediately to a 1-year auto-priced contract.
        Prices are market-discounted for quick signings.
      </p>
    </div>

    <div class="header-stats">
      <div class="stat-item">
        <span class="stat-label">Available Players</span>
        <span class="stat-value">{{ filteredPlayers().length }}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">Discount Applied</span>
        <span class="stat-value">20%</span>
      </div>
    </div>
  </div>



  <!-- Players Table -->
  <div class="players-section">
    <app-players-table [config]="playersTableConfig()"></app-players-table>
  </div>

  <!-- Signing Modal -->
  <div
    class="modal-overlay"
    *ngIf="showSigningModal()"
    (click)="closeSigningModal()"
  >
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>Sign {{ selectedPlayer()?.name }}</h3>
        <button class="modal-close" (click)="closeSigningModal()">Ã—</button>
      </div>

      <div class="modal-body">
        <div class="player-summary">
          <div class="player-info">
            <div class="player-name">{{ selectedPlayer()?.name }}</div>
            <div class="player-details">
              <span class="position">{{ selectedPlayer()?.position }}</span>
              <span class="age">{{ selectedPlayer()?.age }} years old</span>
              <span class="overall">OVR: {{ selectedPlayer()?.overall }}</span>
            </div>
          </div>

          <div class="contract-details">
            <div class="contract-term">
              <span class="label">Contract Length:</span>
              <span class="value">1 Year</span>
            </div>
            <div class="contract-salary">
              <span class="label">Base Salary:</span>
              <span class="value">{{
                formatCurrency(getDiscountedPrice(selectedPlayer()!))
              }}</span>
            </div>
            <div class="contract-bonus">
              <span class="label">Signing Bonus:</span>
              <span class="value">$0</span>
            </div>
            <div class="contract-guarantees">
              <span class="label">Guarantees:</span>
              <span class="value">None</span>
            </div>
          </div>

          <div class="pricing-breakdown">
            <div class="breakdown-item">
              <span class="label">Market Price:</span>
              <span class="value">{{
                formatCurrency(getEstimatedMarketPrice(selectedPlayer()!))
              }}</span>
            </div>
            <div class="breakdown-item discount">
              <span class="label">Open FA Discount (20%):</span>
              <span class="value"
                >-{{
                  formatCurrency(
                    getEstimatedMarketPrice(selectedPlayer()!) -
                      getDiscountedPrice(selectedPlayer()!)
                  )
                }}</span
              >
            </div>
            <div class="breakdown-item total">
              <span class="label">Your Price:</span>
              <span class="value">{{
                formatCurrency(getDiscountedPrice(selectedPlayer()!))
              }}</span>
            </div>
          </div>

          <div class="signing-note">
            <p>
              <strong>Note:</strong> This is an immediate signing with no
              negotiation. The player will be added to your roster immediately
              upon confirmation.
            </p>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" (click)="closeSigningModal()">
          Cancel
        </button>
        <button class="btn btn-primary" (click)="processSigning()">
          Sign Player
        </button>
      </div>
    </div>
  </div>
</div>
