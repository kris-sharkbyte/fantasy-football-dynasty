---
description: Player acquisition and drafting
globs:
alwaysApply: false
---

---

description: Hybrid Acquisition → Negotiation
globs:
alwaysApply: false

---

Hybrid Acquisition → Negotiation (Recommended)
Phase A: Acquire “Rights” (no contract yet)

Pick one acquisition mode per league; all it does is determine who owns negotiation rights:

Snake Draft (fast & fair)

Rookies: get fixed rookie scale (2–3y auto; you choose) the moment they’re drafted.

Veterans: team only gets exclusive negotiation rights, no contract yet.

Auction Draft (hype)

Winning a veteran gives exclusive negotiation rights, not a locked salary.

The auction price becomes a cap hold (placeholder) until you sign or renounce.

Open FA Rounds (live room)

Submitting the top bid gives you rights, then you still formalize the contract terms.

Why rights? Because it lets the owner decide 1y vs 2y vs 3y after they’ve claimed the player, within a timed window.

Phase B: Contract Negotiation Window (cap at 3 years)

After rights are assigned, run a timed Negotiation Window (e.g., 48–72 in‑game hours):

You can offer 1y, 2y, or 3y deals (league max).

Veterans must be signed or renounced by the deadline.

Unsigned veterans → re‑enter FA (league can choose compensation or none).

Contract Types (simple & distinct)

1‑Year Prove‑It

Lower APY ceiling, higher guarantees (% of total).

Team gets flexibility; player gets security.

2‑Year Bridge

Mid APY, mid guarantees, gentle backload allowed.

3‑Year Standard (max)

Best APY discount, moderate guarantees, most dead‑cap risk if cut.

You can encode this as rails so the AI and users can’t create weird shapes.

Rails (league config)

maxYears = 3

minBase = league min

maxSigningBonusPct = 40% of total value

defaultGuaranteePct = 40–60% (per player “guaranteeBias”)

1y cap: apy <= 0.9 \* 2y_APY_estimate (encourage 2–3y for stars)

3y incentive: 5–10% APY discount vs 1–2y

APY estimation (deterministic)

Compute fair APY by position/overall/tier + market demand.

Clamp by minAPYByPos / maxAPYByPos to keep it sane.

AI agent prefers: guarantees > APY > years (tunable per player).

Optional Team‑Control Mechanics (fun + strategic)
Qualifying Offers (QO)

If you hold rights and can’t agree: issue a 1‑year QO (league‑set APY by tier).

Player can accept the QO (locked 1y) or test RFA with your Right of First Refusal.

Right of First Refusal (RFA‑like)

Other teams may offer; you can match exactly.

If you don’t match, you may receive draft pick compensation (league rule).

One Tag Per Offseason (Franchise/Transition, simplified)

Franchise: auto 1‑year contract at market APY (position formula).

Transition: right of first refusal but no comp.

Keeps stars in play without complicated real‑NFL minutiae.

Data Model tweaks

New fields

LeaguePlayer.rightsTeamId (who can negotiate now)

LeaguePlayer.capHold (placeholder until signed; auction price or estimate)

LeaguePlayer.rightsExpireAt (timestamp for the window)

Contract.contractType = 'prove_it' | 'bridge' | 'standard'

Contract.capHits[] (precomputed for UI + queries)

Transitions

WIN RIGHTS → set rightsTeamId, capHold, rightsExpireAt.

SIGN → write Contract, clear capHold, set isSigned = true, currentTeamId.

RENEGE/RENOUNCE → clear rights; send to FA pool.

QO/TAG → write a 1‑year contract doc immediately with computed APY.

Server Rules (callables)

assignRights(leagueId, playerId, teamId, capHold?)

previewOffer(leagueId, playerId, input) → returns cap table + dead money (years ≤ 3)

submitOffer(leagueId, playerId, teamId, payload)

validate years ≤ 3, cap never negative across all years

run agent evaluation → accept/counter/reject

if accepted → write Contract, clear capHold, update team/player

issueQO(leagueId, playerId, teamId) → creates 1‑year computed deal

applyFranchiseTag(leagueId, playerId, teamId) → creates 1‑year market APY deal

renounceRights(leagueId, playerId, teamId) → sends to FA

All writes authoritative on the server; UI only previews.

UI Flow (concise, PrimeNG)

Acquire Page (Draft/Auction/FA rounds)

When you win: player chip shows “Rights Held” + cap hold.

Negotiation Room (per‑player)

Offer Builder: radio for 1y / 2y / 3y → sliders for APY & guarantees.

Live Cap Table: Y1–Y3 cap hits + dead money preview.

AI response panel: accept / counter / ask for higher guarantees.

Actions: Submit, Issue QO, Tag, Renounce.

Deadline Banner

Countdown. Unsigned rights auto → RFA or FA, per league settings.
